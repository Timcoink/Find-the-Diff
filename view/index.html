<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Puzzle Viewer - Upload ZIP</title>
  <link rel="stylesheet" href="style.css">
  <!-- Include JSZip library from CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  
  <script>
  function googleTranslateElementInit() {
    new google.translate.TranslateElement({
      pageLanguage: 'en',
      layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
      includedLanguages: 'en,ru,es,fr,de,zh-CN,ja,ko'
    }, 'translate-container');
  }
</script>
<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
  
</head>
<body>
  <!-- Top Navigation Banner -->
  <div class="top-banner">
    <a href="/">Gallery</a>
    <a href="/view" class="active">View</a>
  </div>
  
  <div id="translate-container"></div>
  
  <h1>Puzzle Viewer</h1>
  <p>Please upload your puzzle ZIP file or use ?view=URL to load from a URL.</p>
  <input type="file" id="zipInput" accept=".zip">
  <div id="loadingIndicator">Loading ZIP file from URL...</div>
  <div id="uploadError"></div>
  
  <!-- Combined Image Section with Drawing Editor -->
  <div id="combinedSection" style="display:none;">
    <h2>Combined Image Editor</h2>
    
    <!-- Drawing Controls - Will be positioned based on settings -->
    <div id="editorControls" class="bottom-position">
      <div class="control-group">
        <label for="colorPicker">Color:</label>
        <input type="color" id="colorPicker" value="#FF0000">
      </div>
      <div class="control-group">
        <label for="brushSize">Brush Size:</label>
        <input type="range" id="brushSize" min="1" max="50" value="5">
      </div>
      <button id="eraserBtn">Eraser</button>
      <button id="clearBtn">Clear Drawing</button>
      <button id="settingsBtn">⚙️ Settings</button>
    </div>
    
    <div id="canvasContainer">
      <canvas id="bgCanvas"></canvas>
      <canvas id="drawCanvas"></canvas>
      <button id="fullscreenBtn">Fullscreen</button>
      <div id="canvasResizeHandle"></div>
    </div>
  </div>
  
  <!-- Button to toggle the Answer Key -->
  <button id="toggleAnswerBtn" style="display:none;" onclick="toggleAnswer()">Show Answer Key</button>
  
  <!-- Settings Overlay -->
  <div id="settingsOverlay" onclick="closeSettings()"></div>
  
  <!-- Settings Panel -->
  <div id="settingsPanel">
    <h3>Settings</h3>
    <div class="settings-option">
      <label>Tool Position:</label>
      <select id="toolPositionSelect">
        <option value="bottom">Bottom</option>
        <option value="top">Top (Sticky)</option>
      </select>
    </div>
    <div class="settings-option">
      <label>Canvas Size:</label>
      <button onclick="resizeCanvasToFit()">Fit to Screen</button>
    </div>
    <div style="text-align: right; margin-top: 20px;">
      <button onclick="closeSettings()">Close</button>
    </div>
  </div>
  
  <!-- Answer Key Section (Moveable and Uniformly Resizable) -->
  <div id="answerSection">
    <div id="answerKeyContainer">
      <div id="answerKeyHeader">Answer Key - moveable and resizable</div>
      <img id="answerImg" src="" alt="Answer Key Image">
      <div id="answerResizeHandle"></div>
    </div>
  </div>
  
  <!-- Text File Preview -->
  <div id="textPreview"></div>
  
  <footer>
    <p>
      If you are the owner of any image on this site and do not wish it to appear,
      please email us at <a href="mailto:findthediff-main@iname.com">findthediff-main@iname.com</a>.
    </p>
    <p>&copy; 2025 findthediff.ddnsfree.com. All rights reserved.</p>
  </footer>

  <script src="script.js"></script>
</body>
</html>
